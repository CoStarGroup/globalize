/*!
 * Globalize v1.0.0-alpha.3 2014-06-20T00:49Z Released under the MIT license
 * http://git.io/TrdQbw
 */
!function(a,b){"function"==typeof define&&define.amd?define(["cldr","../globalize","cldr/supplemental"],b):"object"==typeof exports?module.exports=b(require("cldrjs"),require("globalize")):b(a.Cldr,a.Globalize)}(this,function(a,b){var c=b._createError,d=b._formatMessage,e=b._isPlainObject,f=b._validateCldr,g=b._validateDefaultLocale,h=b._validatePresence,i=b._validateType,j=function(a,b){i(a,b,"undefined"==typeof a||a instanceof Date,"Date")},k=function(a,b){i(a,b,"undefined"==typeof a||"string"==typeof a||e(a),"String or plain Object")},l=function(a,b){i(a,b,"undefined"==typeof a||"string"==typeof a,"a string")},m=function(a,b){return a.main(b,{"throw":!0})},n=function(a,b){var c,d,e;if(a.map)return a.map(b);for(c=[],d=0,e=a.length;e>d;d++)c[d]=b(a[d],d,a);return c},o=function(a){var b,c=[];for(b in a)c.push(a[b]);return c},p=function(a){var b=[];return b=o(m(a,"dates/calendars/gregorian/dateTimeFormats/availableFormats")),b=b.concat(o(m(a,"dates/calendars/gregorian/timeFormats"))),b=b.concat(o(m(a,"dates/calendars/gregorian/dateFormats"))),b=b.concat(n(o(m(a,"dates/calendars/gregorian/dateTimeFormats")),function(b,c){return"string"!=typeof b?b:d(b,[m(a,["dates/calendars/gregorian/timeFormats",c]),m(a,["dates/calendars/gregorian/dateFormats",c])])})),n(b,function(a){return{pattern:a}})},q=function(a,b){var e;switch("string"==typeof a&&(a={skeleton:a}),!0){case"skeleton"in a:e=m(b,["dates/calendars/gregorian/dateTimeFormats/availableFormats",a.skeleton]);break;case"date"in a:case"time"in a:e=m(b,["dates/calendars/gregorian","date"in a?"dateFormats":"timeFormats",a.date||a.time]);break;case"datetime"in a:e=m(b,["dates/calendars/gregorian/dateTimeFormats",a.datetime]),e&&(e=d(e,[m(b,["dates/calendars/gregorian/timeFormats",a.datetime]),m(b,["dates/calendars/gregorian/dateFormats",a.datetime])]));break;case"pattern"in a:e=a.pattern;break;default:throw c("E_INVALID_PAR_VALUE","Invalid `pattern` value ({value}).",{value:a})}return e},r=["sun","mon","tue","wed","thu","fri","sat"],s=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},t=function(a){return s(r,a.supplemental.weekData.firstDay({"throw":!0}))},u=function(a,b){return(a.getDay()-t(b)+7)%7},v=function(a,b){var c=864e5;return(b.getTime()-a.getTime())/c},w=function(a,b){switch(a=new Date(a.getTime()),b){case"year":a.setMonth(0);case"month":a.setDate(1);case"day":a.setHours(0);case"hour":a.setMinutes(0);case"minute":a.setSeconds(0);case"second":a.setMilliseconds(0)}return a},x=function(a){return Math.floor(v(w(a,"year"),a))},y=function(a){return a-w(a,"day")},z=/([a-z])\1*|'[^']+'|''|./gi,A=function(a,b,c){var d;for("string"!=typeof a&&(a=String(a)),d=a.length;b>d;d+=1)a=c?a+"0":"0"+a;return a},B=function(a,b,c){var d=["abbreviated","wide","narrow"];return b.replace(z,function(b){var e,f,g=b.charAt(0),h=b.length;switch("j"===g&&(g=c.supplemental.timeData.preferred({"throw":!0})),g){case"G":f=m(c,["dates/calendars/gregorian/eras",3>=h?"eraAbbr":4===h?"eraNames":"eraNarrow",a.getFullYear()<0?0:1]);break;case"y":f=String(a.getFullYear()),e=!0,2===h&&(f=f.substr(f.length-2));break;case"Y":f=new Date(a.getTime()),f.setDate(f.getDate()+7-(u(a,c)-t(c))-c.supplemental.weekData.minDays({"throw":!0})),f=String(f.getFullYear()),e=!0,2===h&&(f=f.substr(f.length-2));break;case"u":case"U":throw new Error("Not implemented");case"Q":case"q":f=Math.ceil((a.getMonth()+1)/3),2>=h?e=!0:f=m(c,["dates/calendars/gregorian/quarters","Q"===g?"format":"stand-alone",d[h-3],f]);break;case"M":case"L":f=a.getMonth()+1,2>=h?e=!0:f=m(c,["dates/calendars/gregorian/months","M"===g?"format":"stand-alone",d[h-3],f]);break;case"w":f=u(w(a,"year"),c),f=Math.ceil((x(a)+f)/7)-(7-f>=c.supplemental.weekData.minDays({"throw":!0})?0:1),e=!0;break;case"W":f=u(w(a,"month"),c),f=Math.ceil((a.getDate()+f)/7)-(7-f>=c.supplemental.weekData.minDays({"throw":!0})?0:1);break;case"d":f=a.getDate(),e=!0;break;case"D":f=x(a)+1,e=!0;break;case"F":f=Math.floor(a.getDate()/7)+1;break;case"g+":throw new Error("Not implemented");case"e":case"c":if(2>=h){f=u(a,c)+1,e=!0;break}case"E":f=r[a.getDay()],f=6===h?c.main(["dates/calendars/gregorian/days",["c"===g?"stand-alone":"format"],"short",f])||m(c,["dates/calendars/gregorian/days",["c"===g?"stand-alone":"format"],"abbreviated",f]):m(c,["dates/calendars/gregorian/days",["c"===g?"stand-alone":"format"],d[3>h?0:h-3],f]);break;case"a":f=m(c,["dates/calendars/gregorian/dayPeriods/format/wide",a.getHours()<12?"am":"pm"]);break;case"h":f=a.getHours()%12||12,e=!0;break;case"H":f=a.getHours(),e=!0;break;case"K":f=a.getHours()%12,e=!0;break;case"k":f=a.getHours()||24,e=!0;break;case"m":f=a.getMinutes(),e=!0;break;case"s":f=a.getSeconds(),e=!0;break;case"S":f=Math.round(a.getMilliseconds()*Math.pow(10,h-3)),e=!0;break;case"A":f=Math.round(y(a)*Math.pow(10,h-3)),e=!0;break;case"z":case"Z":case"O":case"v":case"V":case"X":case"x":throw new Error("Not implemented");default:return b}return e&&(f=A(f,h)),f})},C=function(a,b){var c,d;if(a.every)return a.every(b);for(c=0,d=a.length;d>c;c++)if(!b(a[c],c,a))return!1;return!0},D=function(a,b,c){var d,e=[],f=["abbreviated","wide","narrow"];return d=C(b.match(z),function(b){function d(){return 1===k?l=/\d/:void 0}function g(){return 1===k?l=/\d\d?/:void 0}function h(){return 2===k?l=/\d\d/:void 0}function i(b){var d,e,f=m(c,b);for(d in f)if(e=new RegExp("^"+f[d]),e.test(a))return n.value=d,l=new RegExp(f[d]);return null}var j,k,l,n={};switch(n.type=b,j=b.charAt(0),k=b.length,j){case"G":i(["dates/calendars/gregorian/eras",3>=k?"eraAbbr":4===k?"eraNames":"eraNarrow"]);break;case"y":case"Y":l=1===k?/\d+/:2===k?/\d\d/:new RegExp("\\d{"+k+",}");break;case"u":case"U":throw new Error("Not implemented");case"Q":case"q":d()||h()||i(["dates/calendars/gregorian/quarters","Q"===j?"format":"stand-alone",f[k-3]]);break;case"M":case"L":g()||h()||i(["dates/calendars/gregorian/months","M"===j?"format":"stand-alone",f[k-3]]);break;case"D":3>=k&&(l=new RegExp("\\d{"+k+",3}"));break;case"W":case"F":d();break;case"g+":throw new Error("Not implemented");case"e":case"c":if(2>=k){d()||h();break}case"E":6===k?i(["dates/calendars/gregorian/days",["c"===j?"stand-alone":"format"],"short"])||i(["dates/calendars/gregorian/days",["c"===j?"stand-alone":"format"],"abbreviated"]):i(["dates/calendars/gregorian/days",["c"===j?"stand-alone":"format"],f[3>k?0:k-3]]);break;case"a":i(["dates/calendars/gregorian/dayPeriods/format/wide"]);break;case"w":case"d":case"h":case"H":case"K":case"k":case"j":case"m":case"s":g()||h();break;case"S":l=new RegExp("\\d{"+k+"}");break;case"A":l=new RegExp("\\d{"+(k+5)+"}");break;case"z":case"Z":case"O":case"v":case"V":case"X":case"x":throw new Error("Not implemented");case"'":n.type="literal",l="'"===b.charAt(1)?/'/:/'[^']+'/;break;default:n.type="literal",l=/./}return l?(a=a.replace(new RegExp("^"+l.source),function(a){return n.lexeme=a,""}),n.lexeme?(e.push(n),!0):!1):!1}),d?e:[]},E=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();a.setDate(1>b?1:c>b?b:c)},F=function(a,b){var c=a.getDate();a.setDate(1),a.setMonth(b),E(a,c)},G=function(){function a(a,b,c){return b>a||a>c}return function(b,c,d){var e,f,g,h,i=0,j=1,k=2,l=3,m=4,n=5,o=6,p=new Date,q=D(b,c,d),r=[],s=["year","month","day","hour","minute","second","milliseconds"];return q.length?(h=C(q,function(b){var c,h,q,s;if("literal"===b.type)return!0;switch(h=b.type.charAt(0),s=b.type.length,"j"===h&&(h=d.supplemental.timeData.preferred({"throw":!0})),h){case"G":r.push(i),f=+b.value;break;case"y":if(q=+b.lexeme,2===s){if(a(q,0,99))return!1;c=100*Math.floor(p.getFullYear()/100),q+=c,q>p.getFullYear()+20&&(q-=100)}p.setFullYear(q),r.push(i);break;case"Y":case"u":case"U":throw new Error("Not implemented");case"Q":case"q":break;case"M":case"L":if(q=2>=s?+b.lexeme:+b.value,a(q,1,12))return!1;F(p,q-1),r.push(j);break;case"w":case"W":break;case"d":if(q=+b.lexeme,a(q,1,31))return!1;E(p,q),r.push(k);break;case"D":if(q=+b.lexeme,a(q,1,366))return!1;p.setMonth(0),p.setDate(q),r.push(k);break;case"F":break;case"g+":throw new Error("Not implemented");case"e":case"c":case"E":break;case"a":e=b.value;break;case"K":q=+b.lexeme+1;case"h":if(q=q||+b.lexeme,a(q,1,12))return!1;p.setHours(q),r.push(l);break;case"H":q=+b.lexeme+1;case"k":if(g=!0,q=q||+b.lexeme,a(q,1,24))return!1;p.setHours(q),r.push(l);break;case"m":if(q=+b.lexeme,a(q,0,59))return!1;p.setMinutes(q),r.push(m);break;case"s":if(q=+b.lexeme,a(q,0,59))return!1;p.setSeconds(q),r.push(n);break;case"A":p.setHours(0),p.setMinutes(0),p.setSeconds(0);case"S":q=Math.round(+b.lexeme*Math.pow(10,3-s)),p.setMilliseconds(q),r.push(o);break;case"z":case"Z":case"O":case"v":case"V":case"X":case"x":throw new Error("Not implemented")}return!0}),!h||e&&g?null:(0===f&&p.setFullYear(-1*p.getFullYear()+1),"pm"===e&&12!==p.getHours()&&p.setHours(p.getHours()+12),r=Math.max.apply(null,r),p=w(p,s[r]))):null}}(),H=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},I=function(a){return H(a)?a:[a]},J=function(a,b){var c,d;if(a.some)return a.some(b);for(c=0,d=a.length;d>c;c++)if(b(a[c],c,a))return!0;return!1};return b.formatDate=b.prototype.formatDate=function(a,b){var c;h(a,"value"),h(b,"pattern"),j(a,"value"),k(b,"pattern"),c=this.cldr,g(c);try{return b=q(b,c),B(a,b,c)}catch(d){throw f(d)}},b.parseDate=b.prototype.parseDate=function(a,b){var c,d;h(a,"value"),l(a,"value"),c=this.cldr,g(c);try{return b=b?I(b):p(c),J(b,function(b){return k(b,"one of the patterns"),b=q(b,c),d=G(a,b,c),!!d}),d||null}catch(e){throw f(e)}},b});